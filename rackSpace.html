<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-

ui.min.js"></script>
<style type="text/css">
<!--

div.box{
    position:absolute;
    background-color:#FFFFFF;
    border:1px dotted black;
    width:10px;
    height:10px;
    font-size: 50%;
    text-align: center;
}
-->
</style>
<script language="JavaScript">


$(function() {
  var boxsize=20;

  // ラックID:["局舎名",X座標,X増分,Y座標,Y増分,"場所名|ラック番号"],
  // ここはJSON渡しでWEB-APIから受け取るようにする。座標は新たなカラムが必要
  var rackSpace = {
200:["ラックスペース",1,0,1,10,"北通路"],
201:["ラックスペース",2,17,1,0,"東通路"],
202:["ラックスペース",2,17,11,0,"西通路"],
205:["ラックスペース",19,0,1,10,"南通路"],
206:["ラックスペース",2,0,2,0,"309"],
207:["ラックスペース",2,0,3,0,"308"],
208:["ラックスペース",2,0,4,0,"307"],
209:["ラックスペース",2,0,5,0,"306"],
210:["ラックスペース",2,0,6,0,"305"],
211:["ラックスペース",2,0,7,0,"304"],
212:["ラックスペース",2,0,8,0,"303"],
213:["ラックスペース",2,0,9,0,"302"],
214:["ラックスペース",2,0,10,0,"301"],
215:["ラックスペース",3,0,2,8,"通路"],
217:["ラックスペース",4,0,2,0,"299"],
218:["ラックスペース",4,0,3,0,"298"],
219:["ラックスペース",4,0,4,0,"297"],
220:["ラックスペース",4,0,5,0,"296"],
221:["ラックスペース",4,0,6,0,"295"],
222:["ラックスペース",4,0,7,0,"294"],
223:["ラックスペース",4,0,8,0,"293"],
224:["ラックスペース",4,0,9,0,"292"],
225:["ラックスペース",4,0,10,0,"291"],
226:["ラックスペース",5,0,2,8,"通路"],
228:["ラックスペース",6,0,2,0,"289"],
229:["ラックスペース",6,0,3,0,"288"],
230:["ラックスペース",6,0,4,0,"287"],
231:["ラックスペース",6,0,5,0,"286"],
232:["ラックスペース",6,0,6,0,"285"],
233:["ラックスペース",6,0,7,0,"284"],
234:["ラックスペース",6,0,8,0,"283"],
235:["ラックスペース",6,0,9,0,"282"],
236:["ラックスペース",6,0,10,0,"281"],
237:["ラックスペース",7,0,2,8,"通路"],
239:["ラックスペース",8,0,2,0,"279"],
240:["ラックスペース",8,0,3,0,"278"],
241:["ラックスペース",8,0,4,0,"277"],
242:["ラックスペース",8,0,5,0,"276"],
243:["ラックスペース",8,0,6,0,"275"],
244:["ラックスペース",8,0,7,0,"274"],
245:["ラックスペース",8,0,8,0,"273"],
246:["ラックスペース",8,0,9,0,"272"],
247:["ラックスペース",8,0,10,0,"271"],
248:["ラックスペース",9,0,2,8,"通路"],
250:["ラックスペース",10,0,2,0,"269"],
251:["ラックスペース",10,0,3,0,"268"],
252:["ラックスペース",10,0,4,0,"267"],
253:["ラックスペース",10,0,5,0,"266"],
254:["ラックスペース",10,0,6,0,"265"],
255:["ラックスペース",10,0,7,0,"264"],
256:["ラックスペース",10,0,8,0,"263"],
257:["ラックスペース",10,0,9,0,"262"],
258:["ラックスペース",10,0,10,0,"261"],
259:["ラックスペース",11,0,2,8,"通路"],
261:["ラックスペース",12,0,2,0,"259"],
262:["ラックスペース",12,0,3,0,"258"],
263:["ラックスペース",12,0,4,0,"257"],
264:["ラックスペース",12,0,5,0,"256"],
265:["ラックスペース",12,0,6,0,"255"],
266:["ラックスペース",12,0,7,0,"254"],
267:["ラックスペース",12,0,8,0,"253"],
268:["ラックスペース",12,0,9,0,"252"],
269:["ラックスペース",12,0,10,0,"251"],
270:["ラックスペース",13,0,2,8,"通路"],
272:["ラックスペース",14,0,2,0,"249"],
273:["ラックスペース",14,0,3,0,"248"],
274:["ラックスペース",14,0,4,0,"247"],
275:["ラックスペース",14,0,5,0,"246"],
276:["ラックスペース",14,0,6,0,"245"],
277:["ラックスペース",14,0,7,0,"244"],
278:["ラックスペース",14,0,8,0,"243"],
279:["ラックスペース",14,0,9,0,"242"],
280:["ラックスペース",14,0,10,0,"241"],
281:["ラックスペース",15,0,2,8,"通路"],
283:["ラックスペース",16,0,2,0,"239"],
284:["ラックスペース",16,0,3,0,"238"],
285:["ラックスペース",16,0,4,0,"237"],
286:["ラックスペース",16,0,5,0,"236"],
287:["ラックスペース",16,0,6,0,"237"],
288:["ラックスペース",16,0,7,0,"234"],
289:["ラックスペース",16,0,8,0,"233"],
290:["ラックスペース",16,0,9,0,"232"],
291:["ラックスペース",16,0,10,0,"231"],
292:["ラックスペース",17,0,2,8,"通路"],
294:["ラックスペース",18,0,2,0,"229"],
295:["ラックスペース",18,0,3,0,"228"],
296:["ラックスペース",18,0,4,0,"227"],
297:["ラックスペース",18,0,5,0,"226"],
298:["ラックスペース",18,0,6,0,"227"],
299:["ラックスペース",18,0,7,0,"224"],
300:["ラックスペース",18,0,8,0,"223"],
301:["ラックスペース",18,0,9,0,"222"],
302:["ラックスペース",18,0,10,0,"221"],
  };

  // ここもJSONでWEB-APIから受け取るようにする
  var flag = {
    200 : ['2015/07/06', '2015/07/06']
  };

  // DIV要素とCSSで箱を書く
  for(var i in rackSpace){
    var area = $("<div id='" + i + "'>" + rackSpace[i][5] + "</div>")
              .addClass("box")
              .css({
                "left": rackSpace[i][1] * boxsize,
                "top": rackSpace[i][3] * boxsize,
                "width": (rackSpace[i][2]+1) * boxsize,
                "height": (rackSpace[i][4]+1) * boxsize
              });
    if(flag[i]){
      (area).css({"background-color": "#FFAAAA"});
    }
    $(document.body).append(area);
  }

  // DIV要素がクリックされたら、flagをチェックして色をトグルする
  $("div").click(function(){
    if( !flag[this.id] ){
      $(this).css({"background-color": "#FFAAAA"});
      flag[this.id] = 1;
    }
    else {
      $(this).css({"background-color": "#FFFFFF"});
      flag[this.id] = 0;
    }
  });
});
</script>
</HEAD>
<BODY>
</BODY>
</HTML>
